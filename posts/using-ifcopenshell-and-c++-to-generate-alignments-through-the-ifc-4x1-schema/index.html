<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Using IfcOpenShell and C++ to generate Alignments through the IFC 4x1 schema | IfcOpenShell Academy</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://academy.ifcopenshell.org/posts/using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Francisco Navarrete Mandly">
<link rel="prev" href="../creating-a-simple-wall-with-property-set-and-quantity-information/" title="Creating a simple wall with property set and quantity information" type="text/html">
<link rel="next" href="../using-ifcopenshell-to-parse-ifc-files-with-python/" title="Using IfcOpenShell to parse IFC files with Python" type="text/html">
<meta property="og:site_name" content="IfcOpenShell Academy">
<meta property="og:title" content="Using IfcOpenShell and C++ to generate Alignments through the IFC 4x1 ">
<meta property="og:url" content="https://academy.ifcopenshell.org/posts/using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/">
<meta property="og:description" content="IfcOpenShell has an EXPRESS parser and code generator that generates code for the various IFC schemas. As part of the source code repository comes pre-generated code for the two widely used versions I">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-05-21T10:03:00+02:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="EXPRESS">
<meta property="article:tag" content="IfcOpenShell">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../">

            <span id="blog-title">IfcOpenShell Academy</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="../using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/index.md" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>
                </li>
<li class="nav-item">
<a href="http://ifcopenshell.org" class="nav-link">IfcOpenShell Home ⮫</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="../using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/" class="u-url">Using IfcOpenShell and C++ to generate Alignments through the IFC 4x1 schema</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/francisco-navarrete-mandly/">Francisco Navarrete Mandly</a>
            </span></p>
            <p class="dateline">
            <a href="../using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/" rel="bookmark">
            <time class="published dt-published" datetime="2017-05-21T10:03:00+02:00" itemprop="datePublished" title="2017-05-21 10:03">2017-05-21 10:03</time></a>
            </p>
                <p class="commentline">
        
        <a href="../using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/#utterances-thread">Comments</a>


            
        </p>
<p class="sourceline"><a href="../using-ifcopenshell-and-c%2B%2B-to-generate-alignments-through-the-ifc-4x1-schema/index.md" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p><em>IfcOpenShell</em> has an <a href="https://github.com/IfcOpenShell/IfcOpenShell/tree/master/src/ifcexpressparser#readme">EXPRESS parser and code generator</a> that generates code for the various IFC schemas. As part of the source code repository comes pre-generated code for the two widely used versions IFC2X3 and IFC4. But arbitrary schemas can be fed into the parser to provide support for other schemas at compile time. This post highlights the process of generating code for other schemas and talks about the recent developments within the IFC Alignment project._</p>
<p><img alt="Illustration of an alignment as exchanged in IFC" src="../../images/alignment.png"></p>
<!-- TEASER_END -->

<p>We at <a href="http://www.aplitop.com/">aplitop</a> are convinced of the added value that the BIM methodology will bring to linear construction works. Therefore, an important first step is the ability to share alignment files in the IFC format. The latest efforts within the IFC community are oriented towards this. IFC Alignment has been standardized in 2015, and work is continuing on IFC Road, IFC Bridge, ...</p>
<p>This information can be used to extend BIM models in roads, trains, and other civil works and provides the data model for 3D and 2D alignment information for the spatial location of infrastructure assets.</p>
<p><em>Overview slide presented in the buildingSmart Barcelona ’17 summit</em>
<img alt="Overview slide presented in the buildingSmart Barcelona ’17 summit" src="../../images/slide.png"></p>
<h3>Code generation procedure</h3>
<p>The <a href="https://github.com/IfcOpenShell/IfcOpenShell/tree/master/src/ifcexpressparser">code generator</a> can be ran manually on the IFC4x1 EXPRESS schema or alternatively, provide the schema to the CMake build process with the COMPILE_SCHEMA option. This folder contains Python code to generate C++ type information based on an Express schema. In particular it has only been tested using recent version of the IFC schema and will most likely fail on any other Express schema. It generates code that can decorate instances returned by the parser with type information. The generated schema classes are expected to include an IfcRoot class in order to be able to build a mapping of instances according to their GlobalId attributes. The code can be invoked in the way given below:</p>
<pre class="code literal-block"><span></span><code>python bootstrap.py express.bnf &gt; express_parser.py &amp;&amp; python express_parser.py IFC4x1.exp
</code></pre>

<p>The first step generates code to read generic schemas in the EXPRESS modelling language by parsing its syntax in the "Backus–Naur form" (express.bnf). The code generated is the used to parse the IFC schema and results in 5 files being generated.</p>
<h3>New entities in the IfcAlignment schema</h3>
<p>The following entities are introduced. They are used to model linear spatially referenced construction works as illustrated in the figure on the right.</p>
<p><img alt="Graphical illustration of the attributes of an alignment in IFC" src="../../images/wijnholts2016-1.png"></p>
<p><em>Graphical illustration of the attributes of an alignment in IFC. Source: <a href="http://alexandria.tue.nl/extra2/afstversl/bwk/Wijnholts_2016.pdf">Wijnholts 2016</a></em></p>
<ul>
<li>IfcTransitionCurveSegment2D</li>
<li>IfcLineSegment2D</li>
<li>IfcClothoidalArcSegment2D</li>
<li>IfcCircularArcSegment2D</li>
<li>IfcAlignment2DHorizontalSegment</li>
<li>IfcAlignment2DHorizontal</li>
<li>IfcAlignment2DVerSegParabolicArc</li>
<li>IfcAlignment2DVerSegLine</li>
<li>IfcAlignment2DVerticalSegment</li>
<li>IfcAlignment2DVertical</li>
<li>IfcAlignmentCurve</li>
<li>IfcAlignment</li>
</ul>
<h3>Generated code</h3>
<p>The IFC4X1 and more recent IFC4X3 schemas are, after this tutorial was written, now bundled with recent versions of IfcOpenShell.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/c%2B%2B/" rel="tag">C++</a></li>
            <li><a class="tag p-category" href="../../categories/express/" rel="tag">EXPRESS</a></li>
            <li><a class="tag p-category" href="../../categories/ifcopenshell/" rel="tag">IfcOpenShell</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../creating-a-simple-wall-with-property-set-and-quantity-information/" rel="prev" title="Creating a simple wall with property set and quantity information">Previous post</a>
            </li>
            <li class="next">
                <a href="../using-ifcopenshell-to-parse-ifc-files-with-python/" rel="next" title="Using IfcOpenShell to parse IFC files with Python">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div data-title="Using IfcOpenShell and C++ to generate Alignments through the IFC 4x1 schema" id="utterances-thread"></div>
        <script src="https://utteranc.es/client.js" repo="IfcOpenShell/academy" issue-term="title" label="Comments" theme="github-light" crossorigin="anonymous"></script></section></article><!--End of body content--><footer id="footer">
            Contents © 2021         <a href="mailto:thomas@aecgeeks.com">Thomas Krijnen</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
